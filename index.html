<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Welder RM Tool</title>

<style>
body{
  margin:0;
  background:#0b0f14;
  color:#e5e7eb;
  font-family:Arial, sans-serif;
  display:flex;
  justify-content:center;
}
.wrapper{
  width:100%;
  max-width:420px;
  padding:16px;
}
.card{
  background:#111827;
  border-radius:14px;
  padding:16px;
}
label{
  font-size:13px;
  margin-top:10px;
  display:block;
}
input{
  width:100%;
  padding:10px;
  margin-top:4px;
  border:none;
  border-radius:8px;
  background:#1f2937;
  color:#fff;
}
button{
  width:100%;
  margin-top:16px;
  padding:12px;
  border:none;
  border-radius:10px;
  background:linear-gradient(90deg,#0ea5e9,#f97316);
  color:#020617;
  font-weight:bold;
  cursor:pointer;
}
.result{
  margin-top:14px;
  background:#020617;
  padding:12px;
  border-radius:10px;
  display:none;
}
.chart{
  margin-top:12px;
  height:200px;
  background:#020617;
  border-radius:10px;
  position:relative;
}
.line{
  position:absolute;
  left:0;
  width:100%;
  height:2px;
}
.sl{background:#ef4444;}
.entry{background:#0ea5e9;}
.tp{background:#22c55e;}
.be{background:#facc15;border-top:2px dashed #facc15;}
.label{
  position:absolute;
  right:6px;
  font-size:12px;
}
</style>
</head>

<body>
<div class="wrapper">
<h2 style="text-align:center">Welder RM Tool</h2>

<div class="card">
<label>Депозит ($)</label>
<input id="deposit" value="1000">

<label>Сумма в сделку ($)</label>
<input id="trade" value="500">

<label>Цена входа</label>
<input id="entry" value="100">

<button onclick="calc()">Рассчитать</button>

<div id="res" class="result"></div>
<div id="chart" class="chart"></div>
</div>
</div>

<script>
function calc(){
  const deposit = Number(document.getElementById('deposit').value);
  const trade   = Number(document.getElementById('trade').value);
  const entry   = Number(document.getElementById('entry').value);

  if(!deposit || !trade || !entry){
    alert('Проверь поля');
    return;
  }

  const risk = deposit * 0.008;
  const sl   = entry - (risk / trade) * entry;
  const tp1  = entry + (entry - sl);
  const be   = entry;

  const res = document.getElementById('res');
  res.style.display='block';
  res.innerHTML = `
    Риск: $${risk.toFixed(2)}<br>
    SL: ${sl.toFixed(2)}<br>
    TP1: ${tp1.toFixed(2)}<br>
    BE: ${be.toFixed(2)}
  `;

  const chart = document.getElementById('chart');
  chart.innerHTML='';

  const prices=[sl,entry,tp1];
  const min=Math.min(...prices);
  const max=Math.max(...prices);

  function y(p){return ((max-p)/(max-min))*100;}

  draw(sl,'sl','SL');
  draw(entry,'entry','Entry');
  draw(tp1,'tp','TP');
  draw(be,'be','BE');

  function draw(price,cls,text){
    const line=document.createElement('div');
    line.className='line '+cls;
    line.style.top=y(price)+'%';

    const lbl=document.createElement('div');
    lbl.className='label';
    lbl.style.top=(y(price)-3)+'%';
    lbl.textContent=text+' '+price.toFixed(2);

    chart.appendChild(line);
    chart.appendChild(lbl);
  }
}
</script>
</body>
</html>
